<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Page Title</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" media="screen" href="../../common/css/main.css" />
    <script src="../../common/js/jquery.min.js"></script>
    <!-- 功能常量 -->
    <script src="../../common/js/base.js"></script>
    <!-- 公共方法 -->
    <script src="../../common/js/common.js"></script>
    <!-- 模块共用方法 -->
    <script src="../../common/js/extends.js"></script>
    <!-- 页面js -->
    <script src=""></script>
    <script>
        $(document).ready(function(){
            //初始化绑定事件
            pageEventInit();
            
           // test();
        });
        
    </script>
</head>
<body>
    <div class="">
       <div>
           <input type="button" value="文件列表" onclick="fileGetFileList()">
           <input type="button" value="复制" onclick="fileCopy()">
           <input type="button" value="打开" onclick="fileOpen()">
           <input type="button" value="移动" onclick="fileMove()">
           <input type="button" value="创建文件夹" onclick="fileMkdir()">
           <input type="button" value="自定义" onclick="fileUser()">
           <input type="button" value="xiazai" onclick="fileDownload()">
        </div>
    </div>
    <div>
        <div> <a href="/module/file/uploadDemo.html" >文件上传测试页面</a></div>
    </div>
</body>
</html>
<script>


    function pageEventInit(){
        var url="http://localhost:3100/file/move/1.do";
        var rule="/file/*/*/*.do";
        //var rexp="/(.*)?"+rule.replace("\*","(.*)?")+"(.*)?/g";
        //var rexp="(.*)?"+rule.replace("\*","(.*)?")+"(.*)?";
        var reg = new RegExp("(.*)?"+rule.replace(/\*/g,"(.*)?")+"(.*)?",'g')

        console.log(reg);

       // var test=/(.*)?\/file\/(.*)?(.*)?/g;
        var s1=url.replace(reg,function($0,$1,$2,$3,$4){
            return [$2,$3,$4]
        });
        if(url!=s1){
            console.log("结果"+s1);
        }
        console.log("结果"+s1);

    }
    
    //
    function fileGetFileList(params) {
        $.post(_base.getContextPath()+"/file/getFileList",
            {
                src:encodeURI("D:/opt/JS_HTML格工具"),
                dest:encodeURI("D:/opt/thumb")
            },
            function(data){
                console.log(data);
                if(data)
                if(data.success==2){
                    _common.Jalert(data.message);
                }else if( data.success==1){
                   // window.location.href='/index.html';
                }else{
                  //  window.location.reload();
                }
        });
    }
    //下载/打开文件
    function fileOpen(params) {
        var  filePath=encodeURI('D:/opt/htmlUtil/JS_HTML格式化 - 站长工具.html');
        // raw 默认展示 1下载，
        window.open("/file/open?raw=1&url="+filePath,"_");

    }
    //复制
    function fileCopy(params) {
        $.post(_base.getContextPath()+"/file/copy",
            {
                src:encodeURI("D:/opt/JS_HTML格工具"),
                dest:encodeURI("D:/opt/thumb")
            },
            function(data){
                if(data)
                if(data.success==2){
                    _common.Jalert(data.message);
                }else if( data.success==1){
                   // window.location.href='/index.html';
                }else{
                  //  window.location.reload();
                }
        });
    }
    //移动
    function fileMove(params) {
        $.post(_base.getContextPath()+"/file/move",
            {
                src:encodeURI("D:/opt/JS_HTML格工具"),
                dest:encodeURI("D:/opt/thumb")
            },
            function(data){
                if(data)
                if(data.success==2){
                    _common.Jalert(data.message);
                }else if( data.success==1){
                   // window.location.href='/index.html';
                }else{
                  //  window.location.reload();
                }
        });
    }
    //创建文件夹
    function fileMkdir(params) {
        $.post(_base.getContextPath()+"/file/mkdir",
            {
                src:encodeURI("D:/opt/JS_HTML格工具/aaa/b/ad"),
            },
            function(data){
                if(data)
                if(data.success==2){
                    _common.Jalert(data.message);
                }else if( data.success==1){
                   // window.location.href='/index.html';
                }else{
                  //  window.location.reload();
                }
        });
    }
    
    //下载文件
    function fileDownload(params) {
        _extends.documnetDownLoad(
            _base.getContextPath()+"/file/downloadfile",
            {
                src:encodeURI("D:/opt/JS_HTML格工具/分团软件.rar"),
                fileName:encodeURI("分团软件.rar")
            },
        );
    }
    //
    function fileUser(params) {
        $.post(_base.getContextPath()+"/file/user",
            {
                src:encodeURI("D:/opt/JS_HTML格工具"),
                dest:encodeURI("D:/opt/thumb")
            },
            function(data){
                if(data)
                if(data.success==2){
                    _common.Jalert(data.message);
                }else if( data.success==1){
                   // window.location.href='/index.html';
                }else{
                  //  window.location.reload();
                }
        });
    }

</script>